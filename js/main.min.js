let startY=0;$(document).ready(()=>{window.addEventListener("resize",u),$(".modal_wrap").css("display","none"),setTimeout(()=>{$(".loading").remove(),$(".modal").toggleClass("hide"),$(".modal_wrap").css("display","")},1e3),[".event_banner",".event_gnb_menu"].forEach(e=>$(e).on("click",()=>{$(".event_banner").toggleClass("-open")})),$(".event_gnb_gamestart").on("click",()=>{window.open("https://galaxy.beanfun.com/webapi/view/login/twp?redirect_url=https://warsofprasia.beanfun.com/Main")}),$(".modal_close").on("click",()=>{$(".plate_modal").toggleClass("-active"),$(".modal.type--youtube").toggleClass("hide"),$(".modal_box_veil").toggleClass("-hide"),$(".modal").css("opacity","0"),$(".youtube--2").remove()}),$(".video_button").on("click",()=>{openVideo("KlUc3H5OsJo")});let e,o;function l(e){return o=>handleSmallHeight(e,o)}function s(e){return o=>{911>$(window).height()?handleSmallHeight(e,o):e.allowTouchMove=!0}}let t,a,i;function d(e){startY=e.touches[0].clientY}function n(e){return o=>{o.stopPropagation();let l=e.slides[e.activeIndex],s=l.scrollTop,t=l.scrollHeight,a=l.clientHeight,i=0===s,d=s+a>=t;0===e.realIndex?d&&o.deltaY>0&&e.slideTo(e.realIndex+1):[1,2,3,4,5,6].includes(e.realIndex)?i&&o.deltaY<0?e.slideTo(e.realIndex-1):d&&o.deltaY>0&&e.slideTo(e.realIndex+1):i&&o.deltaY<0&&e.slideTo(e.realIndex-1)}}let r=()=>{e=new Swiper(".section-pages",{direction:"vertical",touchReleaseOnEdges:!0,mousewheel:{releaseOnEdges:!0},loop:!1,freeMode:!1,noSwiping:!0,noSwipingSelector:"button",autoHeight:!1,speed:1e3,slidesPerView:1,spaceBetween:0,watchSlidesProgress:!0,allowTouchMove:!1,on:{init(e){t=s(e),a=l(e),i=n(e),$(".UNI-footer").clone().appendTo(".section_soon"),$(".UNI-footer")[1]?.remove(),$(".UNI-footer").css("z-index",100).css("position","absolute").css("width","100%").css("height",80),$(".gotop").on("click",()=>{e.slideTo(0),e.slides.forEach(e=>{e.scrollTop=0})}),$(".scroll").on("click",()=>{e.slideTo(1)}),$(".UNI-footer").css("display","none"),document.querySelectorAll(".swiper-slide-page").forEach(e=>{e.addEventListener("wheel",i,{passive:!0}),e.addEventListener("touchstart",d,{passive:!0})})},slideChange(e){["active","point"].forEach(e=>[".depth_1",".depth_2"].forEach(o=>$(o).removeClass(e))),$(".swiper-slide-page").off("scroll"),$(".swiper-slide-page").removeClass("scrollable"),$(".gotop").removeClass("show"),$(".UNI-footer").css("display","none"),$(".swiper-slide-page")[e.realIndex].classList.add("scrollable"),$(".depth_1")[e.realIndex].classList.add("active"),$(".depth_1")[e.realIndex].classList.add("point"),0!==e.realIndex&&$(".gotop").addClass("show"),4===e.realIndex&&$(".UNI-footer").css("display","block")}}}),$(".swiper-slide-page")[0].classList.add("scrollable"),e.slideTo(0),$(".depth_1")[0].classList.add("active"),$(".depth_1")[0].classList.add("point");for(let o=0;o<8;o++)addPageClick(o,e)},c=()=>{o=new Swiper(".section-pages",{direction:"vertical",slidesPerView:"auto",touchReleaseOnEdges:!0,mousewheel:{releaseOnEdges:!0,enabled:!0},loop:!1,freeMode:{enabled:!0,sticky:!1,momentumBounce:!1},autoHeight:!0,speed:0,passiveListeners:!0,allowTouchMove:!0,on:{init(e){$(".gotop").on("click",()=>{e.slideTo(0)}),$(".scroll").on("click",()=>{e.slideTo(1)}),$(".UNI-footer").css("display","none")},slideChange(e){$(".gotop").removeClass("show"),$(".UNI-footer").css("display","none"),0!==e.realIndex&&$(".gotop").addClass("show"),4===e.realIndex&&$(".UNI-footer").css("display","block")}}})},p=document.getElementById("page1Video"),g=document.getElementById("video1Source");function u(){let l=document.documentElement,s=`${window.innerHeight}px`;l.style.setProperty("--maxvh",s),$(window).width()>768?($(".event_gnb").addClass("type_clear"),$(".event_gnb").removeClass("type_default"),o&&(o.destroy(!0,!0),o=null,g.src="img/page1/p1_bg.webm",p.load()),e?e.update():setTimeout(()=>r())):(e&&(g.src="img/page1/p1_bg_m.webm",p.load(),e.destroy(!0,!0),e=null,document.querySelectorAll(".swiper-slide-page").forEach(e=>{e.removeEventListener("wheel",i,{passive:!0}),e.removeEventListener("touchstart",d,{passive:!0})})),$(".event_gnb").addClass("type_default"),$(".event_gnb").removeClass("type_clear"),o?o.update():setTimeout(()=>c()))}$(window).width()>768?(g.src="img/page1/p1_bg.webm",p.load(),$(".event_gnb").addClass("type_clear"),$(".event_gnb").removeClass("type_default"),r()):(g.src="img/page1/p1_bg_m.webm",p.load(),$(".event_gnb").addClass("type_default"),$(".event_gnb").removeClass("type_clear"),c())});const handleSmallHeight=(e,o)=>{e.allowTouchMove=!0,o.stopPropagation();let l=o.touches[0].clientY,s="";l>startY?s="down":l<startY&&(s="up");let t=e.slides[e.activeIndex],a=t.scrollTop,i=t.scrollHeight,d=t.clientHeight,n=0===a,r=a+d>=i;n?0!==e.realIndex&&"down"===s&&e.slideTo(e.realIndex-1):r&&"up"===s&&e.slideTo(e.realIndex+1)},addPageClick=(e,o)=>{$(`.page_p${e+1}`).on("click",()=>{o.slideTo(e)})},openVideo=(e,o)=>{$(".plate_modal").toggleClass("-active"),$(".modal").css("opacity","1").css("visibility","inherit"),$(".modal.type--youtube").toggleClass("hide"),$(".modal_box_veil").toggleClass("-hide"),e?$(".modal_source").append(`<iframe width="auto" height="auto" class="modal_youtube youtube--2"
        src="https://www.youtube.com/embed/${e}?si=1_stAmmA1RL7LFrt"
            frameborder="0" 
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
            referrerpolicy="strict-origin-when-cross-origin"
            allowfullscreen>
</iframe>`):o&&$(".modal_source").append(`<video class="modal_youtube youtube--2" loop autoplay playsinline controls controlslist="nodownload" preload="metadata">
<source src=${o} type="video/mp4">
</video>`)};